<ion-header [translucent]="true">
  <ion-toolbar color="primary" >
    <ion-buttons slot="end">
      <ion-button  (click)="openPopover($event)">
        <ion-icon name="ellipsis-vertical" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>
      Tarefas
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Tarefas</ion-title>
    </ion-toolbar>
  </ion-header>


  <!-- Scrollable Segment -->
<ion-segment [(ngModel)]="type" >
  <ion-segment-button value="pendente" layout="icon-start">
    <ion-icon name="alert-circle"></ion-icon>
    <ion-label>Pendentes</ion-label>
  </ion-segment-button>
  <ion-segment-button value="done" layout="icon-start">
    <ion-icon name="checkmark-circle"></ion-icon>
    <ion-label>Concluidas</ion-label>
  </ion-segment-button>
 
</ion-segment>
  
  <!-- List of Sliding Items -->
<ion-list *ngIf="type == 'pendente'" >
  <ion-item-sliding *ngFor="let task of tasks | async">
    <ion-item *ngIf="!task.done">
      <ion-label>{{task.value}}</ion-label>
      <ion-checkbox slot="start"   (ionChange)="taskService.setStorage()"></ion-checkbox>
      <!-- so mostra o campo abaixo se a data tiver setada -->
      <ion-badge color="warning" *ngIf="task.date" >
        {{task.date.toDate() | date: 'dd/MM/YYYY' }}
      </ion-badge>
    </ion-item>
    <ion-item-options side="end">
      <ion-item-option color="success" (click)="presentAlertPromptUpdate(i,task)" >
        <ion-icon name="create-outline" slot="icon-only" ></ion-icon>
      </ion-item-option>
      <ion-item-option color="danger" (click)="presentAlertPromptdelete(i)">
        <ion-icon name="trash-outline" slot="icon-only"></ion-icon>
      </ion-item-option>
    </ion-item-options>
  </ion-item-sliding>

</ion-list>
   

<ion-list *ngIf="type == 'done'" >
  <ion-item-sliding *ngFor="let task of tasks | async">
    <ion-item *ngIf="task.done" >
      <ion-label>{{task.value}}</ion-label>
      <ion-checkbox slot="start"  (ionChange)="taskService.setStorage()" ></ion-checkbox>
      <!-- so mostra o campo abaixo se a data tiver setada -->
      <ion-badge color="warning" *ngIf="task.date" >
        {{task.date.toDate() | date: 'dd/MM/YYYY' }}
      </ion-badge>
    </ion-item>
    <ion-item-options side="end">
      <ion-item-option color="success" (click)="presentAlertPromptUpdate(i,task)" >
        <ion-icon name="create-outline" slot="icon-only" ></ion-icon>
      </ion-item-option>
      <ion-item-option color="danger" (click)="presentAlertPromptdelete(i)">
        <ion-icon name="trash-outline" slot="icon-only"></ion-icon>
      </ion-item-option>
    </ion-item-options>
  </ion-item-sliding>

</ion-list>
   

  <ion-fab vertical="bottom"  horizontal="end" slot="fixed">
    <ion-fab-button color="danger" (click)="presentAlertPromptAdd()" >
      <ion-icon name="add"></ion-icon>
    </ion-fab-button>
  </ion-fab>

</ion-content>
